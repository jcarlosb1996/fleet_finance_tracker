<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Deposits</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-light">
    <div class="container py-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>Deposits</h1>
        <div>
          <a
            class="btn btn-outline-secondary ms-2"
            href="{% url 'partner_list' %}"
            >Partners</a
          >
          <a class="btn btn-outline-primary" href="{% url 'month-to-month' %}">
            ðŸ“Š View Month-to-Month Earnings
          </a>

          <a
            class="btn btn-outline-secondary ms-2"
            href="{% url 'expense_list' %}"
            >Expenses</a
          >

          <a
            class="btn btn-outline-secondary ms-2"
            href="{% url 'vehicle_list' %}"
            >Vehicles</a
          >

          <a class="btn btn-primary" href="{% url 'deposit_add' %}"
            >+ Add Deposit</a
          >
          <a
            class="btn btn-outline-secondary ms-2"
            href="{% url 'summary_weekly' %}"
            >Weekly Summary</a
          >
          <a class="btn btn-link ms-2" href="/admin/">Admin</a>
        </div>
      </div>

      {% if messages %} {% for m in messages %}
      <div class="alert alert-info">{{ m }}</div>
      {% endfor %} {% endif %}

      <table class="table table-bordered bg-white">
        <thead class="table-light">
          <tr>
            <th>Paid At</th>
            <th>Source</th>
            <th>Vehicle</th>
            <th>Net Amount</th>
            <th>Your Share</th>
            <th>Partner Share</th>
          </tr>
        </thead>
        <tbody>
          {% for d in deposits %}
          <tr>
            <td>{{ d.paid_at }}</td>
            <td>{{ d.source }}</td>
            <td>
              {% if d.vehicle %} {{ d.vehicle.name }} {% else %} â€” {% endif %}
            </td>

            <td>${{ d.amount_net }}</td>
            <td class="text-success">${{ d.owner_amount }}</td>
            <td class="text-muted">${{ d.partner_amount }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6" class="text-center text-muted">No deposits yet.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <h4 class="mt-4">Totals (recent)</h4>
      <ul class="list-unstyled">
        <li>
          <strong>Total Net:</strong> ${{ totals.total_net|floatformat:2 }}
        </li>
        <li>
          <strong>Your Total:</strong> ${{ totals.total_owner|floatformat:2 }}
        </li>
        <li>
          <strong>Partner Total:</strong>
          ${{totals.total_partner|floatformat:2}}
        </li>
      </ul>
    </div>
  </body>
</html>
